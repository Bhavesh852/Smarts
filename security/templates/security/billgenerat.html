{% extends 'society/dashboard.html' %}
{% block css %}

{% endblock %}

{% block body %}

                <div class="modal fade" id="bill">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">

                      <div class="modal-header">
                        <h4 class="modal-title">Maintenance Bill :)</h4>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                      </div>
                      <div class="modal-body">
                        <form action="/security/bilgen/" method="POST" enctype="multipart/form-data">
                          
                          <div class="form-group row">
                            <div class="col-md-4"><label for="billdate">Bill Date :</label></div>
                            <div class="col-md-8"><input type="date" class="form-control" placeholder="bill date" id="bdate" autocomplete="off" name="billdate" required="required"></div>
                          </div>

                          <div class="form-group row">
                            <div class="col-md-4"><label for="flatno">Flat No. :</label></div>
                            <div class="col-md-8"><input type="tel" class="form-control" placeholder="Flat number" id="fn" autocomplete="off" name="flatno" required="required"></div>
                          </div>

                          <div class="form-group row">
                            <div class="col-md-4"><label for="duedate">Due Date :</label></div>
                            <div class="col-md-8"><input type="date" class="form-control" placeholder="due date" id="dd" autocomplete="off" name="duedate" required="required"></div>
                          </div>

                          <div class="form-group row">
                            <div class="col-md-4"><label for="period">Period :</label></div>
                            <div class="col-md-8"><input type="text" class="form-control" placeholder="@example 1 feb to 27 feb" id="pr" autocomplete="off" name="period" required="required"></div>
                          </div>

                          <div class="form-group row">
                            <div class="col-md-4"><label for="nname">Name :</label></div>
                            <div class="col-md-8"><input type="text" class="form-control" placeholder="Enter name" id="nn" autocomplete="off" name="nname" required="required"></div>
                          </div>

                          <div class="form-group row">
                            <div class="col-md-4"><label for="amd">All Municipal Due :</label></div>
                            <div class="col-md-8"><input type="tel" class="form-control"  id="almd" autocomplete="off" name="amd" required="required" value="0"></div>
                          </div>

                          <div class="form-group row">
                            <div class="col-md-4"><label for="age">Administrative and General Expenses :</label></div>
                            <div class="col-md-8"><input type="tel" class="form-control"  id="Aage" autocomplete="off" name="age" required="required" value="0"></div>
                          </div>

                          <div class="form-group row">
                            <div class="col-md-4"><label for="sf">Sinking Funds :</label></div>
                            <div class="col-md-8"><input type="tel" class="form-control"  id="skf" autocomplete="off" name="sf" required="required" value="0"></div>
                          </div>

                          <div class="form-group row">
                            <div class="col-md-4"><label for="pbm ">Periodic Building Maintenance :</label></div>
                            <div class="col-md-8"><input type="tel" class="form-control"  id="pdbm" autocomplete="off" name="pbm" required="required" value="0"></div>
                          </div>

                          <div class="form-group row">
                            <div class="col-md-4"><label for="cau">Common Area Utilisation/parking :</label></div>
                            <div class="col-md-8"><input type="tel" class="form-control"  id="caup" autocomplete="off" name="cau" required="required" value="0"></div>
                          </div>

                          <div class="form-group row">
                            <div class="col-md-4"><label for="noc">Non Occupation Charges :</label></div>
                            <div class="col-md-8"><input type="tel" class="form-control"  id="nocm" autocomplete="off" name="noc" required="required" value="0"></div>
                          </div>

                          <div class="form-group row">
                            <div class="col-md-4"><label for="pac">Past Arrears of Contribution :</label></div>
                            <div class="col-md-8"><input type="tel" class="form-control" id="paoc" autocomplete="off" name="pac" required="required" value="0"></div>
                          </div>

                          <div class="form-group row">
                            <div class="col-md-4"><label for="intd">Interest Due :</label></div>
                            <div class="col-md-8"><input type="tel" class="form-control"  id="ind" autocomplete="off" name="intd" required="required" value="0"></div>
                          </div>

                        {% csrf_token %}
                          <div class="text-center">
                            <button class="btn btn-primary" data-toggle="modal" data-target="#Register" type="submit">Gererate</button>
                          </div>
                      </form>
                      </div>
                    </div>
                  </div>
                </div>  

                <div class="modal fade" id="adrecent">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">

                      <div class="modal-header">
                        <h4 class="modal-title">Do you really want to add all bills to the recent files?</h4>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                      </div>
                      <div class="modal-body">
                        <p>1) Your all created bills are added to the recent files.</p>
                        <p>2) After Added to recent you can make new bills.</p>
                        <p>3) To continue the process check it out and click on the button.</p>
                        <form action="/security/recents/" method="POST">
                        {% csrf_token %}
                          <div class="form-group form-check">
                            <label class="form-check-label">
                              <input class="form-check-input" type="checkbox" required="required"> Check it out.
                            </label>
                          </div>
                          <div class="text-center">
                            <button type="submit" class="btn btn-info">Add to Recents</button>
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>  

{% if user.is_authenticated %}
  {% load static %}
  <div class="sidebar">
    <a class="text-center" id="lgo" href="http://127.0.0.1:8000/security/home/">
    <img src="{% static 'society/logo.png' %}" height="100vh" ></a>
    <p class="text-light text-center" >USER : {{ request.user }}</p>
    <a href="http://127.0.0.1:8000/security/home/">Home</a>
    <a href="http://127.0.0.1:8000/security/complain/">Complaint Management</a>
    <a href="http://127.0.0.1:8000/security/voting/">Voting Management</a>
    <a class="active" href="/security/main/">Maintenance Management</a>
    <a href="/security/visit/">Visitor Management</a>
    <a href="http://127.0.0.1:8000/society/logout/">Signout</a>
  </div>

  <div class="content">
    <section>
      <a href="/security/main/" class="btn btn-secondary my-3">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"/>
          <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
        </svg>
        Back
      </a>
    </section>

    {% for message in messages %}
        <div class="alert alert-{{ message.tags }} mb-0 alert-dismissible fade show" role="alert">
            <strong>Message : </strong> {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
        </div>  
    {% endfor %}

    <section class="text-dark text-center">
      <div class=" mx-auto" id="tab">
        <table class="table table-striped table-hover mt-2 mb-5 " style="box-shadow: 0 4px 8px 0 #ccc, 0 6px 20px 0 #ccc;">
          <thead>
            <tr>
              <th colspan=3> <h3><u> Maintenance Generator </u></h3></th>
              <th><button class="btn btn-warning" data-toggle="modal" data-target="#adrecent">Add to Recent</button></th>
            </tr></thead>
          <thead class="bg-dark">
            <tr class="text-light">
              <th>NAME</th>
              <th>FLATE_NO.</th>
              <th>ACTION</th>
              <th>STATUS</th>
            </tr>
          </thead>
          <tbody>
            {% for i in users %}
            <tr>
              {% if i.last_name != adm %}
                <td>{{ i.first_name }}</td>
                <td>{{ i.last_name }}</td>
                
              {% for j in ls5 %}
                {% if i.last_name == j %}            
                <td><button class="btn btn-success" disabled>Generate Bill</button></td>
                <td>
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle-fill text-success" viewBox="0 0 16 16">
                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                  </svg>
                </td>
                {% elif j == 'onetime' %}
                  {% if i.last_name not in ls5 %}
                  <td><a href="/security/billform/{{ i.last_name }}" class="btn btn-success">Generate bill</a></td>
                  <td>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill text-danger" viewBox="0 0 16 16">
                      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
                    </svg>
                  </td>
                  {% endif %}
                {% endif %}
              {% endfor %}

              {% endif %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>  
    </section>

  </div>  

{% else %}
  <div class="alert alert-danger my-5" role="alert">
    <h4 class="alert-heading">Error: Oops You are not logged In</h4>
    <p>Aww yeah, you got an error, read this important alert message. This example text is going to run a bit longer so that you can see how spacing within an alert works with this kind of content.</p>
    <hr>
    <p class="mb-0">Whenever you need to, be sure to use margin utilities to keep things nice and tidy.</p>
  </div>
{% endif %}
{% endblock %}